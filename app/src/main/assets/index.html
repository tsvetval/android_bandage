<!-- index.html content -->

<html>
<head>
    <!-- Tip: Use relative URLs when referring to other in-app content to give
              your app code the flexibility to change the scheme or domain as
              necessary. -->
    <link rel="stylesheet" href="/assets/stylesheet.css">
    <script src="/assets/chart.js"></script>
    <script>
        alert('12');
    </script>
    <title></title>
</head>
<body onload="drawCharts();">
<p>This file is loaded from in-app content.</p>
<p>This file is loaded from in-app content.</p>
<div class="col-xs-8">
    <canvas id="temperatureChart" style="max-height:200px"></canvas>
</div>
<div class="col-xs-8">
    <canvas id="impedanceChart" style="max-height:200px"></canvas>
</div>

<script type="text/javascript">
    function drawCharts() {
        const temperatureLabels =  generateTime(7);
        const temperatureChartData = {
          labels: temperatureLabels,
          datasets: [{
            label: 'Температура',
            data: [34, 36, 36, 35, 36, 35, 36],
            fill: false,
            borderColor: 'rgb(75, 192, 192)',
            tension: 0.5
          }]
        };

        const temperatureChart =  document.getElementById('temperatureChart');
        new Chart(temperatureChart, {
            type: 'line',
            data: temperatureChartData,
            options: {
                scales: {
                    y: {
                        suggestedMin: 30,
                        suggestedMax: 45
                    }
                },
                responsive: true,
                plugins: {
                  legend: {
                    position: 'top',
                  },
                  title: {
                    display: false,
                    text: 'Температура'
                  }
                }
            }
          });


        const impedanceLabels =  generateTime(7);
        const impedanceChartData = {
          labels: impedanceLabels,
          datasets: [{
            label: 'Импеданс',
            data: [100, 150, 300, 400, 400, 450, 500],
            fill: false,
            borderColor: 'orange',
            tension: 0.5
          }]
        };

        const impedanceChart =  document.getElementById('impedanceChart');
        new Chart(impedanceChart, {
            type: 'line',
            data: impedanceChartData,
            options: {
                scales: {
                    y: {
                        suggestedMin: 0,
                        suggestedMax: 1000
                    }
                },
                responsive: true,
                plugins: {
                  legend: {
                    position: 'top',
                  },
                  title: {
                    display: false,
                    text: 'Импеданс'
                  }
                }
            }
          });
    }
    function generateTime(points) {
      var result = [];
      var today = new Date();
      today.setMinutes(today.getMinutes() - (5*(points-1)));


      for (let i = 0; i < points; i++) {
        var h = today.getHours();
        var m = today.getMinutes();
        //result.push(today.toLocaleTimeString());
        result.push(String(h).padStart(2, "0") +":"+ String(m).padStart(2, "0"));
        today.setMinutes(today.getMinutes() + 5);
      }
      return result;
    }
</script>

</body>
</html>


